<%# Update the Bento Cards with current month stats and top merchants %>
<%= turbo_stream.update "bento_cards_container" do %>
  <%= render partial: "transactions/bento_cards" %>
<% end %>

<%# Replace the entire tbody to avoid nested <tbody> causing header misalignment %>
<%= turbo_stream.replace "transactions_table_body" do %>
  <tbody id="transactions_table_body" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
    <%= render partial: "transactions/table_body", locals: { transactions: @transactions } %>
  </tbody>
<% end %>

<%# Update the month heading %>
<%= turbo_stream.update "current_month_heading" do %>
  <%= @date.strftime("%B %Y") %>
<% end %>

<%# Update the navigation links %>
<%= turbo_stream.update "month_navigation" do %>
  <%= link_to transactions_path(year: @date.prev_month.year, month: @date.prev_month.month, filter: @filter_type),
              class: "inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",
              data: { action: 'click->transactions-nav#navigate' } do %>
    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
    </svg>
    Previous
  <% end %>
  <%= link_to transactions_path(year: @date.next_month.year, month: @date.next_month.month, filter: @filter_type),
              class: "inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",
              data: { action: 'click->transactions-nav#navigate' } do %>
    Next
    <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
    </svg>
  <% end %>
<% end %>

