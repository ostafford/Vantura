{"version":3,"file":"FilterDeleteBinder-ofG0e45l.js","sources":["../../app/javascript/components/analysis/FilterDeleteBinder.tsx"],"sourcesContent":["/**\n * FilterDeleteBinder\n * Binds the existing \"Delete Filter\" button to the typed API client\n * Replaces inline fetch() logic without changing the UI markup\n */\n\nimport React from 'react'\nimport { QueryProvider } from '../../providers/QueryProvider'\nimport { ErrorBoundary } from '../shared/ErrorBoundary'\nimport { useDeleteFilter } from '../../hooks/useFilters'\n\nfunction FilterDeleteBinderContent(): React.JSX.Element {\n  const deleteFilter = useDeleteFilter()\n\n  React.useEffect(() => {\n    const filterDropdown = document.getElementById('analysis-filter') as HTMLSelectElement | null\n    const deleteFilterBtn = document.getElementById('delete-filter-btn') as HTMLButtonElement | null\n\n    if (!filterDropdown || !deleteFilterBtn) return\n\n    const handleDelete = async (e: Event) => {\n      e.preventDefault()\n      e.stopPropagation()\n\n      const value = filterDropdown.value\n      if (!value.startsWith('custom_')) return\n      const idPart = value.replace('custom_', '')\n      const filterId = Number(idPart)\n      if (!filterId || Number.isNaN(filterId)) return\n\n      // Confirm\n      // eslint-disable-next-line no-alert\n      if (!confirm('Are you sure you want to delete this filter?')) return\n\n      try {\n        await deleteFilter.mutateAsync(filterId)\n        // Navigate back to analysis without the filter\n        // @ts-expect-error Turbo is available globally in Rails app\n        if (window.Turbo && typeof window.Turbo.visit === 'function') {\n          // @ts-expect-error Turbo global\n          window.Turbo.visit('/analysis')\n        } else {\n          window.location.href = '/analysis'\n        }\n      } catch (err) {\n        // eslint-disable-next-line no-alert\n        alert('Error deleting filter. Please try again.')\n        // eslint-disable-next-line no-console\n        console.error('[FilterDeleteBinder] Delete failed:', err)\n      }\n    }\n\n    deleteFilterBtn.addEventListener('click', handleDelete)\n    return () => {\n      deleteFilterBtn.removeEventListener('click', handleDelete)\n    }\n  }, [deleteFilter])\n\n  // Renders nothing; acts as behavior binder\n  return <></>\n}\n\nexport default function FilterDeleteBinder(): React.JSX.Element {\n  return (\n    <ErrorBoundary>\n      <QueryProvider>\n        <FilterDeleteBinderContent />\n      </QueryProvider>\n    </ErrorBoundary>\n  )\n}\n\n\n"],"names":["FilterDeleteBinderContent","deleteFilter","useDeleteFilter","React","filterDropdown","deleteFilterBtn","handleDelete","e","value","idPart","filterId","err","jsx","Fragment","FilterDeleteBinder","ErrorBoundary","QueryProvider"],"mappings":"qJAWA,SAASA,GAA+C,CACtD,MAAMC,EAAeC,EAAA,EAErB,OAAAC,EAAM,UAAU,IAAM,CACpB,MAAMC,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAkB,SAAS,eAAe,mBAAmB,EAEnE,GAAI,CAACD,GAAkB,CAACC,EAAiB,OAEzC,MAAMC,EAAe,MAAOC,GAAa,CACvCA,EAAE,eAAA,EACFA,EAAE,gBAAA,EAEF,MAAMC,EAAQJ,EAAe,MAC7B,GAAI,CAACI,EAAM,WAAW,SAAS,EAAG,OAClC,MAAMC,EAASD,EAAM,QAAQ,UAAW,EAAE,EACpCE,EAAW,OAAOD,CAAM,EAC9B,GAAI,GAACC,GAAY,OAAO,MAAMA,CAAQ,IAIjC,QAAQ,8CAA8C,EAE3D,GAAI,CACF,MAAMT,EAAa,YAAYS,CAAQ,EAGnC,OAAO,OAAS,OAAO,OAAO,MAAM,OAAU,WAEhD,OAAO,MAAM,MAAM,WAAW,EAE9B,OAAO,SAAS,KAAO,WAE3B,OAASC,EAAK,CAEZ,MAAM,0CAA0C,EAEhD,QAAQ,MAAM,sCAAuCA,CAAG,CAC1D,CACF,EAEA,OAAAN,EAAgB,iBAAiB,QAASC,CAAY,EAC/C,IAAM,CACXD,EAAgB,oBAAoB,QAASC,CAAY,CAC3D,CACF,EAAG,CAACL,CAAY,CAAC,EAGVW,EAAAA,IAAAC,EAAAA,SAAA,EAAE,CACX,CAEA,SAAwBC,GAAwC,CAC9D,aACGC,EAAA,CACC,SAAAH,EAAAA,IAACI,GACC,SAAAJ,EAAAA,IAACZ,EAAA,EAA0B,EAC7B,CAAA,CACF,CAEJ"}