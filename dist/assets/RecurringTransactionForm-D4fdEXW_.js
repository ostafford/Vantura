import{b as M,j as e,E as C,Q as S}from"./endpoints-s3-HOZU7.js";import{r as s}from"./application-BYD5QzVF.js";import{c as q}from"./recurring-C8Szns6G.js";function T(){return M(o=>q(o),{onSuccess:()=>{}})}function E({transactionId:o,description:u,amount:x,transactionDate:c,onSuccess:y,onCancel:b}){const p=T(),[d,v]=s.useState(u||""),[g,N]=s.useState(x||0),[a,w]=s.useState("monthly"),[i,m]=s.useState(""),[h,k]=s.useState(x&&x<0?"expense":"income"),[f,_]=s.useState("indefinite"),[j,F]=s.useState(1),[n,l]=s.useState({});s.useEffect(()=>{if(!i&&c){const r=new Date(c),t=new Date(r);switch(a){case"weekly":t.setDate(r.getDate()+7);break;case"fortnightly":t.setDate(r.getDate()+14);break;case"monthly":t.setMonth(r.getMonth()+1);break;case"quarterly":t.setMonth(r.getMonth()+3);break;case"yearly":t.setFullYear(r.getFullYear()+1);break}m(t.toISOString().split("T")[0])}},[a,c,i]),s.useEffect(()=>{if(c){const r=new Date(c),t=new Date(r);switch(a){case"weekly":t.setDate(r.getDate()+7);break;case"fortnightly":t.setDate(r.getDate()+14);break;case"monthly":t.setMonth(r.getMonth()+1);break;case"quarterly":t.setMonth(r.getMonth()+3);break;case"yearly":t.setFullYear(r.getFullYear()+1);break}m(t.toISOString().split("T")[0])}},[a]);const D=async r=>{if(r.preventDefault(),l({}),!d.trim()){l({description:"Description is required"});return}if(!i){l({next_occurrence_date:"Next occurrence date is required"});return}try{await p.mutateAsync({transaction_id:o,recurring_transaction:{description:d,amount:g,frequency:a,next_occurrence_date:i,transaction_type:h,projection_months:f,amount_tolerance:j,is_active:!0}}),y?y():window.location.reload()}catch(t){console.error("Failed to create recurring transaction:",t),l({submit:"Failed to create recurring pattern. Please try again."})}};return e.jsx("form",{onSubmit:D,className:"p-6",children:e.jsxs("div",{className:"space-y-5",children:[(u||d)&&e.jsxs("div",{className:"bg-success-500/5 dark:bg-success-700/10 border-2 border-success-500/20 dark:border-success-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 bg-success-500/10 dark:bg-success-700/20 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-success-500 dark:text-success-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Transaction Details"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:d||u}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Amount: ",e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",Math.abs(g).toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"recurring-description",className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Description"}),e.jsx("input",{type:"text",id:"recurring-description",value:d,onChange:r=>v(r.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-primary-900 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-success-500 focus:border-success-500 transition-all"}),n.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Transaction Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"flex items-center p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-primary-900 transition-all",children:[e.jsx("input",{type:"radio",name:"transaction_type",value:"expense",checked:h==="expense",onChange:()=>k("expense"),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Expense"})]}),e.jsxs("label",{className:"flex items-center p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-primary-900 transition-all",children:[e.jsx("input",{type:"radio",name:"transaction_type",value:"income",checked:h==="income",onChange:()=>k("income"),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Income"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"recurring-amount",className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Amount"}),e.jsx("input",{type:"number",id:"recurring-amount",value:g,onChange:r=>N(parseFloat(r.target.value)||0),step:"0.01",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-primary-900 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-success-500 focus:border-success-500 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"frequency",className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"How often does this occur?"}),e.jsxs("select",{id:"frequency",value:a,onChange:r=>w(r.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-primary-900 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-success-500 focus:border-success-500 transition-all",children:[e.jsx("option",{value:"weekly",children:"Weekly (every 7 days)"}),e.jsx("option",{value:"fortnightly",children:"Fortnightly (every 14 days)"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly (every 3 months)"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nextOccurrenceDate",className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"When is the next occurrence?"}),e.jsx("input",{type:"date",id:"nextOccurrenceDate",value:i,onChange:r=>m(r.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-primary-900 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-success-500 focus:border-success-500 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5",children:"We'll project future occurrences from this date"}),n.next_occurrence_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.next_occurrence_date})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projection_months",className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"How far ahead to project?"}),e.jsxs("select",{id:"projection_months",value:f,onChange:r=>_(r.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-primary-900 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-success-500 focus:border-success-500 transition-all",children:[e.jsx("option",{value:"indefinite",children:"Indefinite (recommended)"}),e.jsx("option",{value:"3",children:"3 months"}),e.jsx("option",{value:"6",children:"6 months"}),e.jsx("option",{value:"12",children:"12 months"}),e.jsx("option",{value:"24",children:"24 months"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5",children:"Indefinite will continue projecting as you navigate future months"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"recurring_transaction_amount_tolerance",className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Amount matching tolerance"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500 dark:text-gray-400 font-semibold",children:"Â±$"}),e.jsx("input",{type:"number",id:"recurring_transaction_amount_tolerance",value:j,onChange:r=>F(parseFloat(r.target.value)||0),step:"0.01",min:"0",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-primary-900 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-success-500 focus:border-success-500 transition-all"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5",children:"Allows matching transactions with slightly different amounts"})]}),e.jsx("div",{className:"bg-success-500/10 dark:bg-success-700/10 border border-success-500/30 dark:border-success-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-success-500 dark:text-success-300 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"How it works"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:"We'll automatically add this transaction to future months. When Up Bank syncs the real transaction, we'll match and replace it."})]})]})}),n.submit&&e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-300",children:n.submit})}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:p.isPending,className:"flex-1 bg-gradient-to-r from-success-500 to-success-700 hover:from-success-700 hover:to-success-500 text-white px-5 py-3 rounded-lg font-semibold shadow-md hover:shadow-lg transition-all disabled:opacity-50",children:"Create Pattern"}),b&&e.jsx("button",{type:"button",onClick:b,className:"px-5 py-3 bg-white dark:bg-primary-950 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-primary-900 font-semibold transition-all",children:"Cancel"})]})})]})})}function R(o){return e.jsx(C,{children:e.jsx(S,{children:e.jsx(E,{...o})})})}export{R as default};
//# sourceMappingURL=RecurringTransactionForm-D4fdEXW_.js.map
