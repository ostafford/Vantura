import{a as g,e as j,u as w,j as e,E as k,Q as v}from"./endpoints-s3-HOZU7.js";import{C as M}from"./react-apexcharts.min-CISYt8SF.js";import"./application-BYD5QzVF.js";async function N(t){return g(j.analysis.data(),t)}function F(t){return w(["analysis","data",t],()=>N(t?{filter_id:t}:void 0),{staleTime:1e3*60*5})}function C({filterId:t,height:l=400,chartType:o="pie"}){var x;const{data:n,isLoading:b,error:h}=F(t);if(b)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading chart data..."})});if(h)return e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:["Error loading chart: ",((x=h.error)==null?void 0:x.message)||"Unknown error"]})});const i=n==null?void 0:n.data;if(!i||!i.breakdowns.merchant)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No merchant data available"})});const p=i.breakdowns.merchant,m=Object.entries(p).sort(([,a],[,s])=>Math.abs(s)-Math.abs(a)).slice(0,8),d=m.map(([a])=>a||"Uncategorized"),c=m.map(([,a])=>Math.abs(a)),u=c.reduce((a,s)=>a+s,0),r={chart:{height:l,fontFamily:"Inter, sans-serif",toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:300}},colors:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#06B6D4","#84CC16","#F97316"],labels:d,dataLabels:{enabled:!0,style:{fontSize:"12px",fontWeight:"bold"}},legend:{show:o==="pie",position:"bottom",labels:{colors:window.matchMedia("(prefers-color-scheme: dark)").matches?"#e5e7eb":"#374151"}},tooltip:{y:{formatter:a=>`$${a.toFixed(2)}`}},theme:{mode:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},f=o==="pie"?{...r,chart:{...r.chart,type:"pie"},dataLabels:{...r.dataLabels,formatter:(a,s)=>{const y=s.seriesIndex??0;return`${d[y]||""}: ${a.toFixed(1)}%`}}}:{...r,chart:{...r.chart,type:"bar"},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},xaxis:{categories:d,labels:{style:{colors:window.matchMedia("(prefers-color-scheme: dark)").matches?"#e5e7eb":"#374151"}}},yaxis:{title:{text:"Amount ($)",style:{color:window.matchMedia("(prefers-color-scheme: dark)").matches?"#e5e7eb":"#374151"}},labels:{formatter:a=>`$${a.toFixed(0)}`,style:{colors:window.matchMedia("(prefers-color-scheme: dark)").matches?"#e5e7eb":"#374151"}}}};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",u.toFixed(0)]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total by Merchant"})]}),e.jsx(M,{options:f,series:o==="pie"?c:[{name:"Merchant",data:c}],type:o,height:l})]})}function D(t){return e.jsx(k,{children:e.jsx(v,{children:e.jsx(C,{...t})})})}export{D as default};
//# sourceMappingURL=MerchantAnalysisChart-Dk8xMjK_.js.map
