import{a as b,e as v,u as D,j as e,E as _,Q as $}from"./endpoints-s3-HOZU7.js";import{r as m}from"./application-BYD5QzVF.js";import{u as E}from"./useResponsive-BKikIpIw.js";async function M(t){return b(v.transactions.index(),t)}async function U(t,s,o){return b(v.transactions.month(t,s),o)}function z(t){const s={filter:t==null?void 0:t.filterType,page:t==null?void 0:t.page,per_page:t==null?void 0:t.perPage},o=t!=null&&t.year&&(t!=null&&t.month)?()=>U(t.year,t.month,s):()=>M(s);return D(["transactions",t==null?void 0:t.year,t==null?void 0:t.month,t==null?void 0:t.filterType,t==null?void 0:t.page],o,{staleTime:1e3*60*2})}function B({year:t,month:s,filterType:o="all",initialTransactions:w}){var N;const{data:n,isLoading:C,error:L}=z({year:t,month:s,filterType:o}),[l,S]=m.useState("date"),[d,p]=m.useState("desc"),{isMobile:T}=E(),f=((N=n==null?void 0:n.data)==null?void 0:N.transactions)||w||[],a=n==null?void 0:n.meta,h=m.useMemo(()=>[...f].sort((x,y)=>{let i,c;switch(l){case"date":i=new Date(x.transaction_date).getTime(),c=new Date(y.transaction_date).getTime();break;case"description":i=x.description.toLowerCase(),c=y.description.toLowerCase();break;case"category":i=(x.category||"Uncategorized").toLowerCase(),c=(y.category||"Uncategorized").toLowerCase();break;case"amount":i=x.amount,c=y.amount;break;default:return 0}return i<c?d==="asc"?-1:1:i>c?d==="asc"?1:-1:0}),[f,l,d]),g=r=>{l===r?p(d==="asc"?"desc":"asc"):(S(r),p("desc"))},k=r=>`${r<0?"-":"+"}$${Math.abs(r).toFixed(2)}`,j=r=>r.is_hypothetical?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-info-100 dark:bg-info-900/30 text-info-800 dark:text-info-300",children:"Hypothetical"}):r.status==="HELD"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-warning-100 dark:bg-warning-900/30 text-warning-800 dark:text-warning-300",children:"Pending"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 dark:bg-success-900/30 text-success-800 dark:text-success-300",children:"Settled"}),u=({column:r})=>l!==r?null:e.jsx("svg",{className:`w-4 h-4 ml-1 ${d==="asc"?"":"transform rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})});return C?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Loading transactions..."})]}):L?e.jsx("div",{className:"px-6 py-12 text-center",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Error loading transactions"})}):h.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No transactions"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"No transactions found for the selected filter."})]}):T?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h.map(r=>e.jsxs("div",{className:`p-4 ${r.is_hypothetical?"bg-purple-50 dark:bg-purple-900/20":""} hover:bg-gray-50 dark:hover:bg-gray-700`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.description}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(r.transaction_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsx("span",{className:`text-sm font-medium ${r.amount<0?"text-expense-600 dark:text-expense-400":"text-income-600 dark:text-income-400"}`,children:k(r.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.category&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(r.category||"Uncategorized").replace(/_/g," ")}),j(r)]})]},r.id))}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>g("date"),children:e.jsxs("div",{className:"flex items-center",children:["Date",e.jsx(u,{column:"date"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>g("description"),children:e.jsxs("div",{className:"flex items-center",children:["Description",e.jsx(u,{column:"description"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>g("category"),children:e.jsxs("div",{className:"flex items-center",children:["Category",e.jsx(u,{column:"category"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>g("amount"),children:e.jsxs("div",{className:"flex items-center justify-end",children:["Amount",e.jsx(u,{column:"amount"})]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map(r=>e.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700 ${r.is_hypothetical?"bg-purple-50 dark:bg-purple-900/20":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:new Date(r.transaction_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:r.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(r.category||"Uncategorized").replace(/_/g," ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j(r)}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right font-medium ${r.amount<0?"text-expense-600 dark:text-expense-400":"text-income-600 dark:text-income-400"}`,children:k(r.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right"})]},r.id))})]}),(a==null?void 0:a.pagination)&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",a.pagination.page," of ",a.pagination.total_pages," (",a.pagination.total," total)"]})})]})}function H(t){return e.jsx(_,{children:e.jsx($,{children:e.jsx(B,{...t})})})}export{H as default};
//# sourceMappingURL=TransactionTable-B-6AntY5.js.map
