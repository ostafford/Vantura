{"version":3,"file":"IncomeExpenseChart-BuOFWwvx.js","sources":["../../app/javascript/components/charts/IncomeExpenseChart.tsx"],"sourcesContent":["/**\n * Income vs Expense comparison chart component\n * Uses ApexCharts for visualization\n */\n\nimport React from 'react'\nimport Chart from 'react-apexcharts'\nimport { QueryProvider } from '../../providers/QueryProvider'\nimport { ErrorBoundary } from '../shared/ErrorBoundary'\nimport { useTrendsData } from '../../hooks/useTrendsData'\n\ninterface IncomeExpenseChartProps {\n  // Props can be passed from ERB view if needed\n  height?: number\n}\n\nfunction IncomeExpenseChartContent({ height = 400 }: IncomeExpenseChartProps): React.JSX.Element {\n  const { data, isLoading, error } = useTrendsData()\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-gray-500 dark:text-gray-400\">Loading chart data...</div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n        <div className=\"text-sm text-red-800 dark:text-red-200\">\n          Error loading chart: {error.error?.message || 'Unknown error'}\n        </div>\n      </div>\n    )\n  }\n\n  const trendsData = data?.data\n  if (!trendsData) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-gray-500 dark:text-gray-400\">No data available</div>\n      </div>\n    )\n  }\n\n  const chartOptions = {\n    chart: {\n      type: 'bar' as const,\n      height: height,\n      fontFamily: 'Inter, sans-serif',\n      toolbar: {\n        show: false\n      },\n      animations: {\n        enabled: true,\n        easing: 'easeinout' as const,\n        speed: 300\n      }\n    },\n    plotOptions: {\n      bar: {\n        horizontal: false,\n        columnWidth: '55%',\n        endingShape: 'rounded' as const\n      }\n    },\n    dataLabels: {\n      enabled: true,\n      style: {\n        fontSize: '12px',\n        fontWeight: 'bold'\n      },\n      formatter: (val: number) => `$${val.toFixed(0)}`\n    },\n    stroke: {\n      show: true,\n      width: 2,\n      colors: ['transparent']\n    },\n    xaxis: {\n      categories: ['Current Month', 'Last Month'],\n      labels: {\n        style: {\n          colors: window.matchMedia('(prefers-color-scheme: dark)').matches\n            ? '#e5e7eb'\n            : '#374151'\n        }\n      }\n    },\n    yaxis: {\n      title: {\n        text: 'Amount ($)',\n        style: {\n          color: window.matchMedia('(prefers-color-scheme: dark)').matches\n            ? '#e5e7eb'\n            : '#374151'\n        }\n      },\n      labels: {\n        formatter: (val: number) => `$${val.toFixed(0)}`,\n        style: {\n          colors: window.matchMedia('(prefers-color-scheme: dark)').matches\n            ? '#e5e7eb'\n            : '#374151'\n        }\n      }\n    },\n    fill: {\n      opacity: 1\n    },\n    colors: ['#10B981', '#EF4444'], // Green for income, red for expenses\n    legend: {\n      show: true,\n      position: 'top' as const,\n      horizontalAlign: 'right' as const,\n      labels: {\n        colors: window.matchMedia('(prefers-color-scheme: dark)').matches\n          ? '#e5e7eb'\n          : '#374151'\n      }\n    },\n    tooltip: {\n      y: {\n        formatter: (val: number) => `$${val.toFixed(2)}`\n      }\n    },\n    theme: {\n      mode: (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') as 'dark' | 'light'\n    }\n  }\n\n  const chartSeries = [\n    {\n      name: 'Income',\n      data: [trendsData.current_month_income, trendsData.last_month_income]\n    },\n    {\n      name: 'Expenses',\n      data: [trendsData.current_month_expenses, trendsData.last_month_expenses]\n    }\n  ]\n\n  return (\n    <div className=\"w-full\">\n      <Chart\n        options={chartOptions}\n        series={chartSeries}\n        type=\"bar\"\n        height={height}\n      />\n    </div>\n  )\n}\n\n/**\n * IncomeExpenseChart - Wrapped with QueryProvider and ErrorBoundary\n */\nexport default function IncomeExpenseChart(props: IncomeExpenseChartProps): React.JSX.Element {\n  return (\n    <ErrorBoundary>\n      <QueryProvider>\n        <IncomeExpenseChartContent {...props} />\n      </QueryProvider>\n    </ErrorBoundary>\n  )\n}\n\n"],"names":["IncomeExpenseChartContent","height","data","isLoading","error","useTrendsData","jsx","jsxs","_a","trendsData","chartOptions","val","chartSeries","Chart","IncomeExpenseChart","props","ErrorBoundary","QueryProvider"],"mappings":"mMAgBA,SAASA,EAA0B,CAAE,OAAAC,EAAS,KAAmD,OAC/F,KAAM,CAAE,KAAAC,EAAM,UAAAC,EAAW,MAAAC,CAAA,EAAUC,EAAA,EAEnC,GAAIF,EACF,OACEG,EAAAA,IAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,mCAAmC,SAAA,uBAAA,CAAqB,CAAA,CACzE,EAIJ,GAAIF,EACF,aACG,MAAA,CAAI,UAAU,wFACb,SAAAG,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAAyC,SAAA,CAAA,0BAChCC,EAAAJ,EAAM,QAAN,YAAAI,EAAa,UAAW,eAAA,CAAA,CAChD,CAAA,CACF,EAIJ,MAAMC,EAAaP,GAAA,YAAAA,EAAM,KACzB,GAAI,CAACO,EACH,OACEH,EAAAA,IAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,mCAAmC,SAAA,mBAAA,CAAiB,CAAA,CACrE,EAIJ,MAAMI,EAAe,CACnB,MAAO,CACL,KAAM,MACN,OAAAT,EACA,WAAY,oBACZ,QAAS,CACP,KAAM,EAAA,EAER,WAAY,CACV,QAAS,GACT,OAAQ,YACR,MAAO,GAAA,CACT,EAEF,YAAa,CACX,IAAK,CACH,WAAY,GACZ,YAAa,MACb,YAAa,SAAA,CACf,EAEF,WAAY,CACV,QAAS,GACT,MAAO,CACL,SAAU,OACV,WAAY,MAAA,EAEd,UAAYU,GAAgB,IAAIA,EAAI,QAAQ,CAAC,CAAC,EAAA,EAEhD,OAAQ,CACN,KAAM,GACN,MAAO,EACP,OAAQ,CAAC,aAAa,CAAA,EAExB,MAAO,CACL,WAAY,CAAC,gBAAiB,YAAY,EAC1C,OAAQ,CACN,MAAO,CACL,OAAQ,OAAO,WAAW,8BAA8B,EAAE,QACtD,UACA,SAAA,CACN,CACF,EAEF,MAAO,CACL,MAAO,CACL,KAAM,aACN,MAAO,CACL,MAAO,OAAO,WAAW,8BAA8B,EAAE,QACrD,UACA,SAAA,CACN,EAEF,OAAQ,CACN,UAAYA,GAAgB,IAAIA,EAAI,QAAQ,CAAC,CAAC,GAC9C,MAAO,CACL,OAAQ,OAAO,WAAW,8BAA8B,EAAE,QACtD,UACA,SAAA,CACN,CACF,EAEF,KAAM,CACJ,QAAS,CAAA,EAEX,OAAQ,CAAC,UAAW,SAAS,EAC7B,OAAQ,CACN,KAAM,GACN,SAAU,MACV,gBAAiB,QACjB,OAAQ,CACN,OAAQ,OAAO,WAAW,8BAA8B,EAAE,QACtD,UACA,SAAA,CACN,EAEF,QAAS,CACP,EAAG,CACD,UAAYA,GAAgB,IAAIA,EAAI,QAAQ,CAAC,CAAC,EAAA,CAChD,EAEF,MAAO,CACL,KAAO,OAAO,WAAW,8BAA8B,EAAE,QAAU,OAAS,OAAA,CAC9E,EAGIC,EAAc,CAClB,CACE,KAAM,SACN,KAAM,CAACH,EAAW,qBAAsBA,EAAW,iBAAiB,CAAA,EAEtE,CACE,KAAM,WACN,KAAM,CAACA,EAAW,uBAAwBA,EAAW,mBAAmB,CAAA,CAC1E,EAGF,OACEH,EAAAA,IAAC,MAAA,CAAI,UAAU,SACb,SAAAA,EAAAA,IAACO,EAAA,CACC,QAASH,EACT,OAAQE,EACR,KAAK,MACL,OAAAX,CAAA,CAAA,EAEJ,CAEJ,CAKA,SAAwBa,EAAmBC,EAAmD,CAC5F,OACET,EAAAA,IAACU,GACC,SAAAV,EAAAA,IAACW,EAAA,CACC,eAACjB,EAAA,CAA2B,GAAGe,CAAA,CAAO,CAAA,CACxC,CAAA,CACF,CAEJ"}